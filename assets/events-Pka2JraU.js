import{c as y}from"./index-_yq3dKNm.js";const w="https://chmfytasgjopdwjbgtek.supabase.co",k="sb_publishable_NPUOTtf_Q1xAIydYRmhXpg_7sYmQqTg",u=y(w,k);let d=[],g=[],m={};const E=new Date("2026-01-016"),I={2:["trap metal"],3:["horrorcore"],4:["phonk","drift phonk","trap metal"],5:["trap metal"],6:["trap metal"],7:["trap metal","horrorcore"],12:["doom metal","stoner metal","sludge metal","stoner rock"],13:["death metal","grindcore"],14:["stoner metal","stoner rock","sludge metal","doom metal","space rock","drone metal"],21:["bass house"],30:["shoegaze"],31:["shoegaze","post-grunge"],32:["shoegaze"],39:["symphonic metal"],43:["folk punk"],47:["surf rock"],49:["queercore"],62:["melodic bass","future bass","edm"],63:["future bass","melodic bass"],64:["melodic bass","future bass"],65:["melodic bass","future bass"],69:["country hip hop"],72:["dub techno","minimal techno"],77:["garage rock","psychedelic rock"],88:["jam band"],91:["dubstep","riddim","bass music","deathstep"],92:["bass music"],96:["honky tonk"],105:["alternative metal"],109:["afrobeat","jazz funk","funk"],112:["jam band","funk rock","funk"],113:["jam band","newgrass"],119:["future bass"],120:["stutter house"],125:["drum and bass"],130:["tech house"],131:["dembow"],132:["indie dance"],133:["slowcore","post-rock","shoegaze"],140:["indie electronic"],149:["jazz funk"],151:["bass house","bassline","g-house","uk garage"],152:["trance","progressive trance","progressive house"],153:["rap metal","trap metal","industrial"],161:["drum and bass","liquid funk","chillstep"],162:["punk"],163:["ska punk","ska","celtic punk","punk"],164:["queercore"],165:["deep house","melodic house","progressive house","house"],166:["melodic house"],167:["melodic house"],168:["doom metal","sludge metal"],176:["honky tonk","rockabilly"],179:["r&b"],186:["queercore","riot grrrl"],190:["glitch"],191:["blues rock"],194:["funkot"],195:["funkot"],198:["bass music"],203:["psychobilly"],204:["texas country"],206:["folk punk"],208:["christian folk"],209:["riddim","deathstep","dubstep","dub","bass music"],210:["riddim","deathstep","dubstep"],211:["riddim"],217:["americana","outlaw country","alt country","red dirt","honky tonk"],218:["bass music","dubstep","riddim"],220:["dubstep","riddim","bass music"],222:["southern rock"],226:["witch house"],227:["phonk","drift phonk"],228:["drift phonk","phonk"],229:["drift phonk"],233:["folk punk"],236:["edm"],238:["country christian"],243:["screamo"],244:["mathcore","screamo"],245:["screamo"],246:["melodic hardcore","metalcore"],250:["dubstep","riddim","bass music","deathstep","bass house"],251:["bass house","bass music","edm trap"],252:["riddim"],256:["gangster rap","old school hip hop","g-funk"],258:["latin hip hop","mexican hip hop"],260:["downtempo"],262:["downtempo","glitch","bass music"],263:["glitch","downtempo","bass music"],266:["downtempo","dub"],267:["downtempo"],269:["chillstep"],270:["bass music","uk garage"],272:["newgrass","bluegrass","jam band","americana"],273:["newgrass","bluegrass","indie folk"],274:["newgrass","bluegrass","indie folk"],275:["bluegrass","newgrass"],277:["newgrass","bluegrass"],279:["jam band","psychedelic rock"],285:["bossa nova"],287:["jam band"],288:["jam band"],290:["proto-punk"],291:["jam band"],293:["newgrass","bluegrass","jam band"],297:["bass music"],298:["future bass","bass music"],302:["bass music","glitch"],303:["bass music"],304:["glitch"],305:["bass music"],311:["jam band"],315:["bass music","downtempo"],316:["glitch","bass music","downtempo"],317:["jam band"],320:["jam band"],321:["vaporwave","lo-fi beats","jazz beats"],322:["trip hop","downtempo","plunderphonics","nu jazz"],324:["classic blues","boogie-woogie"],325:["bass music"],326:["bass music"],330:["jazz fusion"]},_=[{id:"gw-1",name:"Flamingosis W/ Blockhead, Pure Colors, Little MAC",date:"Jan 31, 7pm",photo:"f.png"},{id:"gw-2",name:"The Jauntee & Kendall Street Company W/ Mynd Reader",date:"March 7, 7pm",photo:"j.png"}];let l=null;function p(t){const n=t.trim().split(`
`),s=n[0].split(",").map(r=>r.trim());return n.slice(1).map(r=>{const e=r.split(/,(?=(?:[^"]*"[^"]*")*[^"]*$)/),a={};return s.forEach((c,i)=>a[c]=String(e[i]??"").trim().replace(/^"|"$/g,"")),a})}async function h(t,n,s){const{error:r}=await u.from("clicks").insert([{event_id:t,event_name:n,action:s}]);r&&console.error("click insert failed:",r)}function S(t){return t?t.split(",").flatMap(n=>I[n.trim()]||[]):[]}function L(t){const n={};return t.forEach(s=>s.artistID&&(n[s.artistID.trim()]=s)),n}function B(t,n){return t?t.split(",").map(s=>n[s.trim()]?.name||"Unknown"):[]}function j(t){return(t.eventName+"|"+t.venue+"|"+t.Date).toLowerCase().replace(/[^a-z0-9]+/g,"-")}function f(t){const n=["cervantes' other side","cervantes' masterpiece ballroom"];return t.filter(s=>["yes","true","1"].includes(String(s.liveMusic).toLowerCase())).filter(s=>n.includes(String(s.venue).trim().toLowerCase())).sort(()=>Math.random()-.5).slice(0,3).map(s=>({event:s,sim:null}))}function b(t,n){const s=document.getElementById("events-container");if(!s)return;s.innerHTML="";const r=JSON.parse(sessionStorage.getItem("viewed_events")||"[]");t.forEach(({event:e})=>{const a=document.createElement("div");a.className="event-card",a.innerHTML=`
      <h3>${e.eventName}</h3>
      <p><strong>Artists:</strong> ${B(e.artistIDs,n).join(", ")}</p>
      <p><strong>Genres:</strong> ${S(e.artistIDs).join(", ")}</p>
    
    `,r.includes(e.id)||(h(e.id,e.readableName,"viewed"),r.push(e.id),sessionStorage.setItem("viewed_events",JSON.stringify(r))),a.addEventListener("click",i=>{i.target.classList.contains("not-interested-btn")||(sessionStorage.setItem("last_recommended_event_ids",JSON.stringify(t.map(o=>o.event.id))),window.location.href=`/event.html?id=${e.id}`)}),a.querySelector(".not-interested-btn")?.addEventListener("click",i=>{i.stopPropagation(),h(e.id,e.readableName,"not_interested"),a.remove()}),s.appendChild(a)})}function A(){const t=document.getElementById("countdown-text"),n=document.getElementById("giveaway-email-form");if(!t||!n)return;let s=10;const r=setInterval(()=>{s--,t.textContent=`(available in ${s}s)`,s<=0&&(clearInterval(r),t.remove(),n.classList.remove("hidden"))},1e3)}function C(){const t=document.getElementById("giveaway-options");t.innerHTML="",_.forEach(n=>{const s=document.createElement("div");s.className="giveaway-option",s.innerHTML=`
      <img src="${n.photo}" alt="${n.name}" class="giveaway-photo" />
      <strong>${n.name}</strong><br>
      ${n.date}
    `,s.addEventListener("click",()=>{N(n)}),t.appendChild(s)})}async function N(t){const n=document.getElementById("giveaway-status-msg");try{n.textContent="Saving entry...",await u.from("emails").insert([{email:l,giveaway_show:t.name}]),n.textContent="You're entered! ðŸŽ‰",localStorage.setItem("giveaway_entered","true"),setTimeout(()=>{document.getElementById("giveaway-overlay").classList.add("hidden"),document.getElementById("giveaway-cta").innerHTML="<p>You're entered ðŸŽ‰</p>"},1e3)}catch(s){console.error("Giveaway insert failed:",s),n.textContent="Error saving entry. Please try again."}}document.addEventListener("DOMContentLoaded",()=>{if(document.getElementById("giveaway-overlay")?.classList.add("hidden"),localStorage.getItem("giveaway_entered")){const e=document.getElementById("giveaway-cta");e&&(e.innerHTML="<p>You're already entered ðŸŽ‰</p>")}const t=document.getElementById("email-form");if(t){const e=document.getElementById("status-msg");t.addEventListener("submit",async a=>{a.preventDefault();const c=document.getElementById("email")?.value.trim();if(c)try{e.textContent="Email saved! Redirecting...",await u.from("emails").insert([{email:c}]),window.location.href="/events.html"}catch{e.textContent="Error saving email."}})}document.getElementById("giveaway-email-form")?.addEventListener("submit",e=>{e.preventDefault(),l=document.getElementById("giveaway-email").value.trim(),l&&(document.getElementById("giveaway-overlay").classList.remove("hidden"),C())}),document.getElementById("events-container")&&Promise.all([fetch("/events.csv").then(e=>(console.log("events.csv fetch status:",e.status),e.text())).then(e=>console.log("events CSV length:",e.length)).catch(e=>console.error("events fetch error:",e)),fetch("/artists.csv").then(e=>e.text())]).then(([e,a])=>{d=p(e).map(o=>({...o,id:j(o),readableName:o.eventName,eventDateObj:new Date(o.Date)})),d=d.filter(o=>o.eventDateObj>=E),console.log("GLOBAL_EVENTS after filtering:",d),localStorage.setItem("events_data",JSON.stringify(d)),g=p(a),m=L(g);let c=JSON.parse(sessionStorage.getItem("last_recommended_event_ids")||"null"),i;c?i=c.map(o=>d.find(v=>v.id===o)).filter(Boolean).map(o=>({event:o,sim:null})):(i=f(d),sessionStorage.setItem("last_recommended_event_ids",JSON.stringify(i.map(o=>o.event.id)))),b(i,m),A()}),document.getElementById("shuffle-btn")?.addEventListener("click",()=>{const e=f(d);sessionStorage.setItem("last_recommended_event_ids",JSON.stringify(e.map(a=>a.event.id))),b(e,m)})});
